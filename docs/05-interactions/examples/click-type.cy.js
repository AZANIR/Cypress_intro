// ***********************************************************
// Кліки та введення тексту
// Цей приклад демонструє взаємодію з елементами
// ***********************************************************

describe('Взаємодія з елементами TodoMVC', () => {
  beforeEach(() => {
    cy.visit('/')
  })
  
  it('має ввести текст у поле вводу', () => {
    // cy.type() - вводить текст у поле
    // '.new-todo' - поле для введення нової задачі
    // 'Нова задача' - текст, який вводимо
    cy.get('.new-todo').type('Нова задача')
    
    // Перевіряємо, що текст введено
    cy.get('.new-todo').should('have.value', 'Нова задача')
  })
  
  it('має додати задачу при натисканні Enter', () => {
    // Вводимо текст та натискаємо Enter
    // '{enter}' - спеціальна клавіша Enter
    cy.get('.new-todo').type('Задача з Enter{enter}')
    
    // Перевіряємо, що задача додалася
    cy.get('.todo-list li').should('contain', 'Задача з Enter')
  })
  
  it('має клікнути на чекбокс', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Задача для відмітки{enter}')
    
    // Знаходимо чекбокс та клікаємо на нього
    // .check() - відмічає чекбокс
    cy.get('.todo-list li').first().find('.toggle').check()
    
    // Перевіряємо, що задача відмічена
    cy.get('.todo-list li').first().should('have.class', 'completed')
  })
  
  it('має клікнути на кнопку фільтра', () => {
    // Додаємо задачі
    cy.get('.new-todo').type('Активна{enter}')
    cy.get('.new-todo').type('Виконана{enter}')
    
    // Відмічаємо останню як виконану
    cy.get('.todo-list li').last().find('.toggle').check()
    
    // Клікаємо на фільтр "Active"
    // cy.contains() - знаходить елемент за текстом
    // .click() - клікає на елемент
    cy.contains('Active').click()
    
    // Перевіряємо, що відображається тільки активна задача
    cy.get('.todo-list li').should('have.length', 1)
  })
  
  it('має очистити поле вводу', () => {
    // Вводимо текст
    cy.get('.new-todo').type('Текст для очищення')
    
    // cy.clear() - очищає поле вводу
    cy.get('.new-todo').clear()
    
    // Перевіряємо, що поле порожнє
    cy.get('.new-todo').should('have.value', '')
  })
  
  it('має використовувати спеціальні клавіші', () => {
    // Спеціальні клавіші в Cypress:
    // {enter} - Enter
    // {esc} - Escape
    // {backspace} - Backspace
    // {selectall} - Select All
    // {del} - Delete
    
    // Вводимо текст
    cy.get('.new-todo').type('Текст{selectall}')
    
    // Тепер весь текст виділено, можна замінити
    cy.get('.new-todo').type('Новий текст{enter}')
    
    // Перевіряємо результат
    cy.get('.todo-list li').should('contain', 'Новий текст')
  })
  
  it('має клікнути на прихований елемент', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Задача для видалення{enter}')
    
    // Кнопка видалення з'являється тільки при наведенні миші
    // Спочатку наводимо мишку
    cy.get('.todo-list li').hover()
    
    // Потім клікаємо на кнопку видалення
    // { force: true } - примусово клікає, навіть якщо елемент прихований
    cy.get('.todo-list li').find('.destroy').click({ force: true })
    
    // Перевіряємо, що задача видалена
    cy.get('.todo-list li').should('not.exist')
  })
})

// Поради:
// 1. Використовуйте .type() для введення тексту
// 2. Використовуйте .click() для кліків
// 3. Використовуйте .check() для чекбоксів
// 4. Використовуйте { force: true } для прихованих елементів
// 5. Комбінуйте команди для складних взаємодій
