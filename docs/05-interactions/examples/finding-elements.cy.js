// ***********************************************************
// Пошук елементів на сторінці
// Цей приклад демонструє різні способи пошуку елементів
// ***********************************************************

describe('Пошук елементів на TodoMVC', () => {
  beforeEach(() => {
    // Підготовка: відкриваємо сторінку перед кожним тестом
    cy.visit('/')
  })
  
  it('має знайти елемент за класом', () => {
    // cy.get('.class-name') - пошук за класом CSS
    // .new-todo - клас поля вводу в TodoMVC
    cy.get('.new-todo').should('be.visible')
  })
  
  it('має знайти елемент за тегом', () => {
    // cy.get('tag-name') - пошук за назвою HTML тега
    // 'h1' - заголовок сторінки
    cy.get('h1').should('contain', 'todos')
  })
  
  it('має знайти елемент за ID', () => {
    // cy.get('#id-name') - пошук за ID (якщо є)
    // У TodoMVC може не бути ID, тому цей приклад демонстративний
    // cy.get('#main').should('exist')
  })
  
  it('має знайти елемент за атрибутом', () => {
    // cy.get('[attribute="value"]') - пошук за атрибутом
    // Пошук поля вводу за типом
    cy.get('input[type="text"]').should('be.visible')
    
    // Пошук за placeholder
    cy.get('[placeholder="What needs to be done?"]').should('exist')
  })
  
  it('має знайти елемент за комбінованим селектором', () => {
    // Комбінація класу та тега
    // 'input.new-todo' - input елемент з класом new-todo
    cy.get('input.new-todo').should('be.visible')
    
    // Комбінація тега, класу та атрибута
    cy.get('input.new-todo[type="text"]').should('exist')
  })
  
  it('має знайти кілька елементів', () => {
    // Додаємо кілька задач
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.new-todo').type('Задача 2{enter}')
    cy.get('.new-todo').type('Задача 3{enter}')
    
    // cy.get() знаходить всі елементи, що відповідають селектору
    // .todo-list li - всі елементи li всередині списку задач
    cy.get('.todo-list li')
      // .should('have.length', 3) - перевіряємо кількість
      .should('have.length', 3)
  })
  
  it('має знайти елемент всередині іншого елемента', () => {
    // Додаємо задачу
    cy.get('.new-todo').type('Задача{enter}')
    
    // Знаходимо батьківський елемент
    cy.get('.todo-list li')
      // .find() - шукає елемент всередині знайденого
      // .find('.toggle') - знаходимо чекбокс всередині елемента задачі
      .find('.toggle')
      .should('exist')
  })
  
  it('має знайти елемент за текстом', () => {
    // cy.contains() - знаходить елемент, що містить текст
    // 'todos' - текст, який шукаємо
    cy.contains('todos').should('be.visible')
    
    // Можна комбінувати з селектором
    cy.contains('h1', 'todos').should('exist')
  })
})

// Найкращі практики вибору селекторів:
// 1. Використовуйте data-атрибути (data-cy, data-testid) - найстабільніші
// 2. Уникайте селекторів, що залежать від стилів (.red-button)
// 3. Уникайте селекторів, що залежать від позиції (:nth-child(3))
// 4. Віддавайте перевагу семантичним селекторам
