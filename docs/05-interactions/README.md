# Тема 5: Пошук та взаємодія з елементами

## Цілі навчання

Після вивчення цієї теми ви зможете:

- Навчитися знаходити елементи на сторінці
- Оволодіти базовими командами взаємодії
- Зрозуміти автоматичне очікування Cypress
- Створювати тести з повним циклом взаємодії

## Пошук елементів

### cy.get() та селектори

`cy.get()` використовується для пошуку DOM-елементів за селектором:

```javascript
// Пошук за класом
cy.get('.new-todo')

// Пошук за ID
cy.get('#todo-input')

// Пошук за тегом
cy.get('input')

// Пошук за атрибутом
cy.get('[data-testid="todo-input"]')
```

### CSS селектори

Cypress підтримує всі стандартні CSS селектори:

```javascript
// Клас
cy.get('.todo-item')

// ID
cy.get('#main')

// Тег
cy.get('li')

// Комбінований
cy.get('ul.todo-list li.completed')
```

### Атрибути та класи

Можна використовувати селектори за атрибутами:

```javascript
// За атрибутом
cy.get('[type="text"]')

// За data-атрибутом
cy.get('[data-cy="todo-item"]')

// Комбінація
cy.get('input[type="text"].new-todo')
```

### Найкращі практики вибору селекторів

1. **Уникайте нестабільних селекторів**
   - ❌ Погано: `cy.get('div:nth-child(3)')` - залежить від позиції
   - ✅ Добре: `cy.get('[data-cy="todo-item"]')` - стабільний селектор

2. **Використовуйте data-атрибути**
   - `data-cy` або `data-testid` - найкращі для тестування
   - Не змінюються при зміні стилів

3. **Уникайте селекторів, що залежать від стилів**
   - ❌ Погано: `cy.get('.red-button')` - може змінитися
   - ✅ Добре: `cy.get('[data-testid="submit-button"]')`

## Взаємодія з елементами

### cy.click() - кліки

Клік на елемент:

```javascript
cy.get('.todo-toggle').click()  // Клік на чекбокс
cy.get('button').click()        // Клік на кнопку
```

### cy.type() - введення тексту

Введення тексту в поле:

```javascript
cy.get('.new-todo').type('Нова задача')
cy.get('.new-todo').type('Нова задача{enter}')  // З Enter
```

**Спеціальні клавіші:**
- `{enter}` - Enter
- `{esc}` - Escape
- `{backspace}` - Backspace
- `{selectall}` - Select All

### cy.clear() - очищення полів

Очищення поля вводу:

```javascript
cy.get('.new-todo').clear()
```

### cy.select() - вибір з випадаючих списків

Вибір опції з select:

```javascript
cy.get('select').select('Option 1')
```

## Перевірка стану елементів

### should() для асертів

`should()` використовується для перевірки різних умов:

```javascript
// Перевірка видимості
cy.get('.todo-list').should('be.visible')

// Перевірка існування
cy.get('.todo-item').should('exist')

// Перевірка тексту
cy.get('h1').should('contain', 'todos')

// Перевірка кількості
cy.get('.todo-list li').should('have.length', 3)
```

### Основні перевірки

**Видимість та існування:**
- `be.visible` - елемент видимий
- `exist` - елемент існує в DOM
- `not.exist` - елемент не існує

**Текст та контент:**
- `contain` - містить текст
- `have.text` - має точний текст
- `have.value` - має значення (для input)

**Стани:**
- `be.checked` - чекбокс відмічений
- `be.disabled` - елемент вимкнений
- `be.enabled` - елемент увімкнений

### Ланцюжки перевірок

Можна ланцюжком додавати кілька перевірок:

```javascript
cy.get('.todo-item')
  .should('be.visible')
  .should('contain', 'Задача')
  .should('have.class', 'completed')
```

Або коротший синтаксис:

```javascript
cy.get('.todo-item')
  .should('be.visible')
  .and('contain', 'Задача')
  .and('have.class', 'completed')
```

## Автоматичне очікування

Cypress автоматично очікує, поки елемент стане доступним:

```javascript
// Cypress автоматично чекає, поки елемент з'явиться
cy.get('.todo-item').click()  // Не потрібно додавати wait()
```

**Переваги:**
- Не потрібно додавати `cy.wait()` вручну
- Тести стають стабільнішими
- Менше помилок через таймаути

## Практичні приклади

У папці `examples/` знаходяться робочі приклади:
- `finding-elements.cy.js` - пошук елементів на TodoMVC
- `click-type.cy.js` - кліки та введення тексту задач
- `assertions.cy.js` - перевірки стану задач
- `todo-workflow.cy.js` - повний workflow: додавання, виконання, видалення задач

## Типові помилки

1. **Використання нестабільних селекторів**
   - Використовуйте data-атрибути замість класів стилів
   - Уникайте селекторів, що залежать від позиції

2. **Забування про автоматичне очікування**
   - Не додавайте `cy.wait()` без потреби
   - Довіряйте автоматичному очікуванню Cypress

3. **Неправильне використання should()**
   - `should()` повертає елемент, можна ланцюжити
   - Використовуйте правильні асерти для типу елемента

4. **Проблеми з динамічними елементами**
   - Cypress автоматично чекає на динамічні елементи
   - Якщо елемент не з'являється, перевірте селектор

## Наступні кроки

Після вивчення цієї теми перейдіть до:
- [Тема 6: Хуки та анотації](../06-hooks/README.md)
