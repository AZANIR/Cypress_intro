// ***********************************************************
// Використання context() для організації тестів
// context() використовується для опису різних контекстів або сценаріїв
// ***********************************************************

// describe() - загальний блок тестів
describe('Робота з TodoMVC', () => {
  // context() - описує конкретний контекст або сценарій
  // 'Коли немає задач' - контекст порожнього стану
  context('Коли немає задач', () => {
    it('має показувати порожній список', () => {
      cy.visit('/')
      
      // Перевіряємо, що список задач порожній
      // У TodoMVC список може бути прихований, якщо немає задач
      cy.get('.todo-list').should('not.exist').or('be.empty')
    })
    
    it('має показувати правильний лічильник', () => {
      cy.visit('/')
      
      // Лічильник має показувати 0 або бути прихованим
      cy.get('.todo-count').should('not.exist').or('contain', '0')
    })
  })
  
  // Інший контекст - коли є задачі
  context('Коли є задачі', () => {
    it('має відображати список задач', () => {
      cy.visit('/')
      
      // Додаємо задачі
      cy.get('.new-todo').type('Задача 1{enter}')
      cy.get('.new-todo').type('Задача 2{enter}')
      cy.get('.new-todo').type('Задача 3{enter}')
      
      // Перевіряємо, що список відображається
      cy.get('.todo-list').should('be.visible')
      cy.get('.todo-list li').should('have.length', 3)
    })
    
    it('має показувати правильний лічильник', () => {
      cy.visit('/')
      
      // Додаємо задачі
      cy.get('.new-todo').type('Задача 1{enter}')
      cy.get('.new-todo').type('Задача 2{enter}')
      
      // Перевіряємо лічильник
      cy.get('.todo-count').should('contain', '2')
    })
  })
  
  // Контекст для виконаних задач
  context('Коли є виконані задачі', () => {
    it('має показувати кнопку очищення', () => {
      cy.visit('/')
      
      // Додаємо задачу
      cy.get('.new-todo').type('Задача{enter}')
      
      // Відмічаємо як виконану
      cy.get('.todo-list li').find('.toggle').check()
      
      // Перевіряємо, що з'явилася кнопка "Clear completed"
      cy.get('.clear-completed').should('be.visible')
    })
  })
})

// Порівняння describe() та context():
// - На практиці вони працюють однаково
// - context() семантично підкреслює зміну контексту
// - describe() використовується для загальної організації
// - Можна використовувати context() всередині describe()
