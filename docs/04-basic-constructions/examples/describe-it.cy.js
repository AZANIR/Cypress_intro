// ***********************************************************
// Базові конструкції: describe() та it()
// Цей приклад демонструє основну структуру тестів у Cypress
// ***********************************************************

// describe() - використовується для групування тестів у логічні блоки
// 'Робота з задачами' - назва блоку тестів
describe('Робота з задачами', () => {
  // it() - описує окремий тестовий випадок
  // 'має додати нову задачу' - опис того, що перевіряє тест
  it('має додати нову задачу', () => {
    // Відкриваємо TodoMVC
    cy.visit('/')
    
    // Додаємо задачу
    cy.get('.new-todo').type('Нова задача{enter}')
    
    // Перевіряємо, що задача додалася
    cy.get('.todo-list li')
      .should('have.length', 1)
      .should('contain', 'Нова задача')
  })
  
  // Другий тест в тому ж блоці
  it('має очистити поле після додавання', () => {
    cy.visit('/')
    
    // Додаємо задачу
    cy.get('.new-todo').type('Задача{enter}')
    
    // Перевіряємо, що поле вводу очистилося
    cy.get('.new-todo').should('have.value', '')
  })
  
  // Третій тест
  it('має відображати кількість активних задач', () => {
    cy.visit('/')
    
    // Додаємо дві задачі
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.new-todo').type('Задача 2{enter}')
    
    // Перевіряємо лічильник (якщо він є)
    // У TodoMVC лічильник показує кількість активних задач
    cy.get('.todo-count').should('contain', '2')
  })
})

// Можна створювати кілька блоків describe() в одному файлі
describe('Фільтрація задач', () => {
  it('має фільтрувати задачі', () => {
    cy.visit('/')
    
    // Додаємо задачі
    cy.get('.new-todo').type('Активна задача 1{enter}')
    cy.get('.new-todo').type('Активна задача 2{enter}')
    
    // Відмічаємо одну як виконану
    cy.get('.todo-list li').first().find('.toggle').check()
    
    // Фільтруємо тільки активні
    cy.contains('Active').click()
    
    // Перевіряємо, що відображається тільки одна активна задача
    cy.get('.todo-list li').should('have.length', 1)
  })
})
