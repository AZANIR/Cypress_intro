// ***********************************************************
// Демонстрація снепшотів у Cypress
// Cypress автоматично створює снепшоти на кожну команду
// ***********************************************************

describe('Демонстрація снепшотів', () => {
  it('показує автоматичні снепшоти на кожну команду', () => {
    // Відкриваємо TodoMVC
    // Cypress автоматично створює снепшот стану сторінки
    cy.visit('/')
    
    // Додаємо задачу
    // Снепшот показує стан до та після введення тексту
    cy.get('.new-todo').type('Перша задача')
    
    // Натискаємо Enter
    // Снепшот показує момент додавання задачі
    cy.get('.new-todo').type('{enter}')
    
    // Перевіряємо результат
    // Снепшот показує фінальний стан з доданою задачею
    cy.get('.todo-list li')
      .should('have.length', 1)
      .should('contain', 'Перша задача')
  })
  
  it('показує снепшоти при взаємодії з елементами', () => {
    cy.visit('/')
    
    // Додаємо кілька задач
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.new-todo').type('Задача 2{enter}')
    cy.get('.new-todo').type('Задача 3{enter}')
    
    // Кожна команда має свій снепшот
    // У Command Log можна клікнути на будь-яку команду
    // та побачити стан сторінки на момент виконання
    
    // Відмічаємо задачу як виконану
    cy.get('.todo-list li').first().find('.toggle').check()
    
    // Снепшот показує зміну стану - задача тепер має клас 'completed'
    cy.get('.todo-list li').first().should('have.class', 'completed')
    
    // Видаляємо задачу
    cy.get('.todo-list li').first().hover().find('.destroy').click({ force: true })
    
    // Снепшот показує фінальний стан - залишилося 2 задачі
    cy.get('.todo-list li').should('have.length', 2)
  })
  
  it('показує снепшоти при помилках', () => {
    cy.visit('/')
    
    // Якщо команда не вдається, Cypress автоматично створює снепшот
    // Це допомагає зрозуміти, що пішло не так
    
    // Намагаємося знайти неіснуючий елемент
    // Cypress створить снепшот, показуючи поточний стан сторінки
    // та пояснить, чому елемент не знайдено
    cy.get('.non-existent-element', { timeout: 2000 }).should('exist')
  })
})

// Як використовувати снепшоти:
// 1. Відкрийте Cypress UI: npm run cypress:open
// 2. Запустіть тест
// 3. У Command Log клікніть на будь-яку команду
// 4. Подивіться на снепшот - він показує стан сторінки на момент виконання команди
// 5. Використовуйте стрілки для навігації між снепшотами
