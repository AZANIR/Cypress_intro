// ***********************************************************
// Базові хуки: before(), after(), beforeEach(), afterEach()
// Цей приклад демонструє використання хуків життєвого циклу
// ***********************************************************

describe('Використання хуків життєвого циклу', () => {
  // before() - виконується ОДИН РАЗ перед усіма тестами в блоці
  before(() => {
    // Цей код виконається тільки один раз перед першим тестом
    // Використовується для важких операцій, які не змінюються
    cy.visit('/')
    cy.log('before() виконався - відкрито сторінку')
  })
  
  // beforeEach() - виконується ПЕРЕД КОЖНИМ тестом
  beforeEach(() => {
    // Цей код виконається перед кожним тестом
    // Використовується для підготовки стану перед кожним тестом
    // Відкриваємо сторінку перед кожним тестом для стабільності
    cy.visit('/')
    cy.log('beforeEach() виконався - підготовка перед тестом')
  })
  
  // Перший тест
  it('тест 1 - має використати стан після before() та beforeEach()', () => {
    // Сторінка відкрита через before() та beforeEach()
    // Можна одразу додавати задачі
    cy.get('.new-todo').type('Задача 1{enter}')
    cy.get('.todo-list li').should('have.length', 1)
  })
  
  // Другий тест
  it('тест 2 - також використовує стан після before() та beforeEach()', () => {
    // Сторінка відкрита через beforeEach() (свіжий стан)
    // Можна додавати задачі
    cy.get('.new-todo').type('Задача 2{enter}')
    cy.get('.todo-list li').should('have.length', 1)
  })
  
  // afterEach() - виконується ПІСЛЯ КОЖНОГО тесту
  afterEach(() => {
    // Цей код виконається після кожного тесту
    // Використовується для очищення після тесту
    cy.log('afterEach() виконався - очищення після тесту')
    // Можна видалити створені задачі
  })
  
  // after() - виконується ОДИН РАЗ після всіх тестів
  after(() => {
    // Цей код виконається тільки один раз після останнього тесту
    // Використовується для фінального очищення
    cy.log('after() виконався - фінальне очищення')
  })
})

// Порядок виконання для цього прикладу:
// 1. before() - відкриває сторінку
// 2. beforeEach() - підготовка
// 3. it('тест 1') - виконання тесту
// 4. afterEach() - очищення
// 5. beforeEach() - підготовка (знову)
// 6. it('тест 2') - виконання тесту
// 7. afterEach() - очищення
// 8. after() - фінальне очищення
