// ***********************************************************
// Порівняння E2E та компонентних тестів
// Цей приклад демонструє різницю між підходами
// ***********************************************************

// E2E (End-to-End) тест - перевіряє весь додаток як ціле
describe('E2E тест - повний workflow', () => {
  it('має виконати повний цикл роботи з задачами', () => {
    // Відкриваємо TodoMVC додаток
    cy.visit('/')
    
    // Додаємо першу задачу
    // cy.get() - знаходимо поле вводу
    // .type() - вводимо текст
    // '{enter}' - натискаємо Enter для додавання
    cy.get('.new-todo').type('Вивчити Cypress{enter}')
    
    // Додаємо другу задачу
    cy.get('.new-todo').type('Написати тести{enter}')
    
    // Перевіряємо, що обидві задачі відображаються
    // cy.get('.todo-list li') - знаходимо всі елементи списку
    // .should('have.length', 2) - перевіряємо, що їх рівно 2
    cy.get('.todo-list li').should('have.length', 2)
    
    // Відмічаємо першу задачу як виконану
    // .first() - беремо перший елемент
    // .find('.toggle') - знаходимо чекбокс всередині
    // .check() - відмічаємо чекбокс
    cy.get('.todo-list li').first().find('.toggle').check()
    
    // Перевіряємо, що задача відмічена
    // .should('have.class', 'completed') - перевіряємо клас
    cy.get('.todo-list li').first().should('have.class', 'completed')
    
    // Видаляємо виконану задачу
    // У headless режимі hover() не працює, тому використовуємо force: true
    // .find('.destroy') - знаходимо кнопку видалення
    // .click({ force: true }) - клікаємо (force для прихованих елементів)
    cy.get('.todo-list li').first().find('.destroy').click({ force: true })
    
    // Перевіряємо, що залишилася тільки одна задача
    cy.get('.todo-list li').should('have.length', 1)
    cy.get('.todo-list li').should('contain', 'Написати тести')
  })
})

// Компонентний тест - перевіряє окрему функціональність
describe('Компонентний тест - додавання задач', () => {
  it('має додати задачу до списку', () => {
    // Відкриваємо сторінку
    cy.visit('/')
    
    // Фокусуємося тільки на функціоналі додавання задачі
    // Додаємо задачу
    cy.get('.new-todo').type('Тестова задача{enter}')
    
    // Перевіряємо результат - задача з'явилася в списку
    cy.get('.todo-list li')
      .should('have.length', 1)
      .should('contain', 'Тестова задача')
    
    // Перевіряємо, що поле вводу очистилося
    cy.get('.new-todo').should('have.value', '')
  })
})

// Порівняння:
// E2E тест:
// - Перевіряє весь workflow від початку до кінця
// - Більш повільний, але перевіряє інтеграцію компонентів
// - Ідеальний для перевірки критичних шляхів користувача
//
// Компонентний тест:
// - Фокусується на одній функціональності
// - Швидший, але не перевіряє інтеграцію
// - Ідеальний для перевірки окремих функцій
